{% extends "base.html" %}
{% block title %}Gunpla List{% endblock %}
{% block content %}
  <h1>Gunpla Models</h1>
  {% if gunplas %}
    <ul id="gunpla-list">
      {% for gunpla in gunplas %}
        <li id="gunpla-{{ gunpla.id }}">
          <strong>{{ gunpla.name }}</strong> - {{ gunpla.series }} - {{ gunpla.grade }} - {{ gunpla.scale }}
          <!-- HTMX Edit Button: When clicked, fetch the edit form and replace the entire <li> -->
          <button 
            hx-get="{{ url_for('main.edit', gunpla_id=gunpla.id) }}" 
            hx-target="#gunpla-{{ gunpla.id }}" 
            hx-swap="outerHTML">
            Edit
          </button>
          <!-- HTMX Delete Button: When clicked, send a DELETE request and remove the <li> -->
          <button 
            hx-delete="{{ url_for('main.delete', gunpla_id=gunpla.id) }}" 
            hx-target="#gunpla-{{ gunpla.id }}" 
            hx-swap="outerHTML" 
            hx-confirm="Are you sure you want to delete this model?">
            Delete
          </button>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No gunpla models found.</p>
  {% endif %}
  <!-- Container where HTMX-edits could be loaded if you want to display the edit form separately -->
  <div id="htmx-container"></div>
{% endblock %}